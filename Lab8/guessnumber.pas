// Компьютер “загадывает” число из указанного диапазона. Задача пользователя – отгадать это число. 
// Пользователь вводит свой вариант ответа, компьютер отвечает, как введенное число относится к загаданному 
// (больше, меньше или равно). На отгадывание дается определенное количество попыток.

program guessnumber;

var
  b, uroven, chislo, popytki, number, max: integer;  
  // b - флаг продолжения игры (1 - играть, 0 - выход)
  // uroven - выбранный уровень сложности
  // chislo - загаданное компьютером число
  // popytki - текущий номер попытки пользователя
  // number - число, введённое пользователем
  // max - максимальное количество попыток для выбранного уровня

begin
  randomize;  // Инициализация генератора случайных чисел

  // Приветствие пользователя
  writeln('###############################');
  writeln('##### Игра "Угадай число" #####');
  writeln('###############################');

  repeat  // Главный игровой цикл, повторяется, пока пользователь хочет играть
    writeln;
    uroven := 0;      // сброс уровня перед новым выбором
    popytki := 0;     // сброс счетчика попыток

    // Цикл выбора уровня сложности с проверкой корректности ввода
    while (uroven < 1) or (uroven > 4) do
    begin
      writeln('Выберите уровень сложности:');
      writeln('1 - Числа от 1 до 10, 3 попытки');
      writeln('2 - Числа от 1 до 50, 5 попыток');
      writeln('3 - Числа от 1 до 100, 8 попыток');
      writeln('4 - Числа от 1 до 1000, 15 попыток');
      readln(uroven);  // пользователь вводит номер уровня
    end;

    // В зависимости от выбранного уровня компьютер загадывает число и устанавливает количество попыток
    if uroven = 1 then begin chislo := random(10) + 1; max := 3; end; 
    if uroven = 2 then begin chislo := random(50) + 1; max := 5; end;
    if uroven = 3 then begin chislo := random(100) + 1; max := 8; end;
    if uroven = 4 then begin chislo := random(1000) + 1; max := 15; end;

    // Основной цикл попыток угадывания
    repeat
      inc(popytki);  // увеличиваем счетчик попыток на 1
      write('Попытка ', popytki, ' Ваше число? ');
      read(number);  // пользователь вводит число

      // Сравнение введённого числа с загаданным и вывод подсказки
      if number > chislo then 
        writeln('   Я загадал число поменьше')
      else if number < chislo then 
        writeln('   Я загадал число побольше')
      else 
        writeln('Вы угадали!')
    until (chislo = number) or (popytki = max);  
    // цикл продолжается, пока число не угадано или не закончатся попытки

    // Если пользователь не угадал и попытки закончились
    if (chislo <> number) and (popytki = max) then
      writeln('К сожалению, Вам не удалось отгадать число. Я загадал ', chislo);

    // Предложение сыграть еще раз
    writeln('Хотите сыграть еще раз? Если да, введите 1, если нет, то 0');
    readln(b);
  until b = 0;  // повторяем главный игровой цикл, пока пользователь вводит 1

end.
