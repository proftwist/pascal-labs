//Краткое описание логики

//Тип Reg хранит сведения о стране и её политической системе.
//В зависимости от типа (Prez, Parl, Smes) в записи используются разные поля.
//Файл LAND.DAT хранит все записи (по одной на страну).

//При запуске программа предлагает меню:
//1 – редактирование записей (ввод стран и их характеристик);
//2 – просмотр записей (предусмотрен, но не реализован в коде).

//В режиме редактирования:
//вводятся страна, континент, тип устройства;
//заполняются специфические поля (в зависимости от типа);
//запись сохраняется в файл.

//Цикл repeat...until завершает работу после выбора корректного пункта меню.

Program Region;

Uses CRT;  { Подключение модуля для управления экраном и клавиатурой }

{------------------------------------------------------------}
{ Типы данных                                                }
{------------------------------------------------------------}
type
  { Перечислимый тип — форма государственного устройства }
  Gos_Us = (Prez, Parl, Smes);

  { Основная запись, описывающая страну }
  Reg = record
    n: integer;              { Порядковый номер записи }
    Country: String[20];     { Название страны }
    Land: String[20];        { Название континента }

    { Вариантная часть записи — зависит от формы правления }
    case ustr: Gos_Us of
      Prez: (FIO_Prez: String[50];   { ФИО президента }
             Sr_Doh: Real);          { Средний доход населения }

      Parl: (FIO_Prem: String[50];   { ФИО премьер-министра }
             Nas: Integer);          { Население }

      Smes: (Kol: Integer;           { Количество партий }
             Chis: Integer);         { Число "спидоносных" (по условию задачи) }
  end;

{------------------------------------------------------------}
{ Глобальные переменные                                      }
{------------------------------------------------------------}
var
  land: file of Reg;  { Файл для хранения записей о странах }
  s, us, abc: String; { Переменные для ввода строк }
  x: Reg;             { Переменная для временного хранения одной записи }
  k, v: integer;      { Счётчики и коды ошибок при преобразовании чисел }

{------------------------------------------------------------}
{ Основная программа                                         }
{------------------------------------------------------------}
begin
  assign(land, 'LAND.DAT');  { Привязка файла к имени LAND.DAT }
  s := '';
  ClrScr;                    { Очистка экрана }

  repeat
    { Главное меню }
    Writeln('Выберите действие:');
    Writeln('   1: редактирование записей');
    Writeln('   2: просмотр записей');
    Readln(s);

    {------------------------------------------------------------}
    { Режим 1: редактирование (ввод новых записей в файл)        }
    {------------------------------------------------------------}
    if s = '1' then
    begin
      Rewrite(land);  { Создаёт новый файл (перезаписывает старый) }

      writeln('Для ввода данных нажмите Enter, для окончания работы - *');

      while not (READKEY = '*') do  { Цикл ввода до нажатия * }
      begin
        x.n := k;      { Присваиваем номер записи }
        k := k + 1;    { Увеличиваем счётчик }

        writeln('__________________________________________________');
        write('Введите название страны: ');
        readln(x.country);

        write('Введите название континента: ');
        readln(x.land);

        write('Введите тип государственного устройства: ');
        readln(us);

        {--------------------------------------------}
        { Президентская республика                   }
        {--------------------------------------------}
        if us = 'президентская' then
        begin
          x.ustr := prez;
          write('Введите Ф.И.О. президента: ');
          readln(x.fio_prez);

          write('Введите средний доход: ');
          readln(abc);
          val(abc, x.sr_doh, v);  { Преобразование строки в число }
        end
        else

        {--------------------------------------------}
        { Парламентская республика                   }
        {--------------------------------------------}
        if us = 'парламентская' then
        begin
          x.ustr := parl;
          write('Введите Ф.И.О. премьера: ');
          readln(x.fio_prem);

          write('Введите население: ');
          readln(abc);
          val(abc, x.nas, v);
        end;

        {--------------------------------------------}
        { Смешанная республика                       }
        {--------------------------------------------}
        if us = 'смешанная' then
        begin
          x.ustr := smes;

          write('Введите количество партий: ');
          readln(abc);
          val(abc, x.kol, v);

          write('Введите число спидоносных: ');
          readln(abc);
          val(abc, x.chis, v);
        end;
      end;

      { Записываем введённую запись в файл }
      write(land, x);

      writeln('Для продолжения ввода нажмите Enter ');
      writeln('Для окончания ввода введите * ');
    end

    {------------------------------------------------------------}
    { Режим 2: просмотр записей                                  }
    {------------------------------------------------------------}
    else if s = '2' then
    begin
      Reset(land);  { Открытие файла для чтения }
      { Здесь должен быть код вывода содержимого файла }
    end

    {------------------------------------------------------------}
    { Обработка неверного выбора                                 }
    {------------------------------------------------------------}
    else
      Writeln('Был выбран пункт, которого не существует!');

  until (s = '1') or (s = '2');  { Повторяем меню до выбора корректного пункта }

  close(land);  { Закрываем файл перед завершением работы }
  Readln;
end.
